/* ========================================
	HEW/UniBoooom!!
	------------------------------------
	HPテクスチャ表示管理用cpp
	------------------------------------
	HpManager.cpp
	------------------------------------
	作成者	仁枝潤哉

	変更履歴
	・2023/11/16 新規作成 仁枝潤哉

========================================== */

// =============== インクルード ===================
#include "HpManager.h"

/* ========================================
	コンストラクタ関数
	-------------------------------------
	内容：生成時に行う処理
	-------------------------------------
	引数：なし
	-------------------------------------
	戻値：なし
=========================================== */
ChpManager::ChpManager()
{
	for (int i = 0; i < MAX_HP; ++i)
	{
		m_pUI[i] = new CHpUI();
		m_pUI[i]->Update();
	}

	m_playerHP = MAX_HP;
	m_playerOldHP = MAX_HP;
}

/* ========================================
	デストラクタ関数
	-------------------------------------
	内容：破棄時に行う処理
	-------------------------------------
	引数：なし
	-------------------------------------
	戻値：なし
=========================================== */
ChpManager::~ChpManager()
{
	for (int i = 0; i < MAX_HP; ++i)
	{
		if (m_pUI[i])
		{
			delete m_pUI[i];
			m_pUI[i] = nullptr;
		}
	}
}

/* ========================================
	更新関数
	-------------------------------------
	内容：HPの更新処理
	-------------------------------------
	引数：なし
	-------------------------------------
	戻値：なし
=========================================== */
void ChpManager::Update()
{
	if (!(m_playerHP <= 0))
	{
		m_playerHP -= 1;
		m_pUI[m_playerHP]->Update();
	}
}

/* ========================================
	描画関数
	-------------------------------------
	内容：HPの描画処理
	-------------------------------------
	引数：なし
	-------------------------------------
	戻値：なし
=========================================== */
void ChpManager::Draw()
{
	for (int i = 0; i < m_playerHP; ++i)
	{
		if (m_pUI[i])
		{
			m_pUI[i]->Draw(70.0f * (float)(i + 0.8), 50.0f, 80.0f, 80.0f);
		}
	}
}
